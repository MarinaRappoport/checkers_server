(this.webpackJsonpcheckers_client=this.webpackJsonpcheckers_client||[]).push([[0],{216:function(e,t,n){e.exports=n(376)},224:function(e,t,n){},26:function(e){e.exports=JSON.parse('{"server":"/api/","socketServer":"/websocket","paths":{"logout":"/logout/","currentGame":"/game/","allPlayers":"/players","register":"/auth/register","login":"/auth/login","invitePlayer":"/invite","acceptPlayer":"/accept","surrender":"/surrender","getHistory":"/history/","move":"/move"},"socketListen":{"gameInvitation":"/user/queue/invite","gameStart":"/user/queue/game_status"}}')},376:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=n(11),s=n(429),l=n(428),u=n(113);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var m=n(115),p=n(207),d=Object(p.a)({typography:{fontFamily:'"Heebo", sans-serif'},direction:"rtl",palette:{primary:{main:"#6634c4"},secondary:{main:"#cccccc"},error:{main:m.a.A400},background:{default:"#fff"},dark:"#868686"}}),f=(n(224),n(14)),b=n(435),h=n(32),v="Authentication/SET_USER",g="Authentication/LOGOUT",E=h.a.fromJS({isLogin:!1,user:null});var y=h.a.fromJS({allUsers:[]});var O=Object(h.b)({board:[],opponent:{username:"",color:""},player:{color:""},currentPlayer:{color:""},isGameOver:!1,winnerUsername:"",selectableSquares:[],selected:[]});var S=n(92),k=n(21),j={notifications:[]};var w=Object(h.b)({games:[]});var _=Object(f.combineReducers)({form:b.a,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return e.set("isLogin",!0).set("user",h.a.fromJS(t.payload));case g:return e.set("isLogin",!1).set("user",null);default:return e}},lobby:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Lobby/SET_ALL_USERS":return e.set("allUsers",h.a.fromJS(t.payload));default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Game/SET_BOARD":return e.set("board",Object(h.b)(t.payload));case"Game/SET_SELECT_PIECE":return e.set("selected",Object(h.b)(t.payload));case"Game/SET_SELECTABLE_SQUARES":return e.set("selectableSquares",Object(h.b)(t.payload));case"Game/SET_PLAYER_COLOR":return e.setIn(["player","color"],t.payload);case"Game/SET_OPPONENT_COLOR":return e.setIn(["opponent","color"],t.payload);case"Game/SET_CURRENT_PLAYER_COLOR":return e.setIn(["currentPlayer","color"],t.payload);case"Game/SET_IS_GAME_OVER":return e.set("isGameOver",t.payload);case"Game/SET_OPPONENT_NICKNAME":return e.setIn(["opponent","username"],t.payload);case"Game/SET_WINNER_USERNAME":return e.set("winnerUsername",t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"App/ENQUEUE_SNACKBAR":return Object(k.a)(Object(k.a)({},e),{},{notifications:[].concat(Object(S.a)(e.notifications),[Object(k.a)({key:t.key},t.notification)])});case"App/CLOSE_SNACKBAR":return Object(k.a)(Object(k.a)({},e),{},{notifications:e.notifications.map((function(e){return t.dismissAll||e.key===t.key?Object(k.a)(Object(k.a)({},e),{},{dismissed:!0}):Object(k.a)({},e)}))});case"App/REMOVE_SNACKBAR":return Object(k.a)(Object(k.a)({},e),{},{notifications:e.notifications.filter((function(e){return e.key!==t.key}))});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"History/SET_HISTORY_GAMES":return e.set("games",Object(h.b)(t.payload));default:return e}}}),C=n(200),x=n(201),A=Object(C.composeWithDevTools)(Object(f.applyMiddleware)(x.a)),L=Object(f.createStore)(_,A),T=n(23),q=n(27),P=n(47),I=n(45),R=n(35),N=n(22),U=n(6),G=n(114),M=function(e){var t=e.config,n=t.redirected,a=t.redirectUrl,c=e.component,o=Object(G.a)(e,["config","component"]);return r.a.createElement(N.b,Object.assign({},o,{render:function(e){return n?r.a.createElement(N.a,{to:{pathname:a,state:{from:e.location}}}):r.a.createElement(c,e)}}))},B=n(7),W=n.n(B),J=n(16),D=n(202),H=n.n(D),K=n(26),Y=H.a.create({baseURL:K.server});var F,V=new(function(){function e(){Object(T.a)(this,e),this.savePlayer=this.setCredentials.bind(this),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.getCredentials=this.getCredentials.bind(this),this.removeCredentials=this.removeCredentials.bind(this),this.setCredentials=this.setCredentials.bind(this)}return Object(q.a)(e,[{key:"register",value:function(){var e=Object(J.a)(W.a.mark((function e(t){var n,a,r,c,o;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,r=t.name,c={username:n,password:a,name:r},e.next=4,Y.post(K.paths.register,c);case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(J.a)(W.a.mark((function e(t){var n,a,r,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,r={username:n,password:a},e.next=4,Y.post(K.paths.login,r);case 4:return c=e.sent,this.setCredentials(n,a),e.abrupt("return",c.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(J.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.get("".concat(K.paths.logout).concat(""+t));case 2:return n=e.sent,this.removeCredentials(),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isCredentialsSaved",value:function(){var e=this.getCredentials(),t=e.username,n=e.password;return!!t&&!!n}},{key:"getCredentials",value:function(){return{username:localStorage.getItem("username"),password:localStorage.getItem("password")}}},{key:"setCredentials",value:function(e,t){localStorage.setItem("username",e),localStorage.setItem("password",t)}},{key:"removeCredentials",value:function(){localStorage.removeItem("username"),localStorage.removeItem("password")}}]),e}()),Q=n(65),z=n(74),X=n(203),$=n.n(X),Z=n(204),ee=n.n(Z),te=function(){function e(){Object(T.a)(this,e),this.sock=null,this.stompClient=null,this.subscribes=[],this.isConnected=!1,this.connect=this.connect.bind(this),this.onConnect=this.onConnect.bind(this),this.disconnect=this.disconnect.bind(this),this.send=this.send.bind(this)}return Object(q.a)(e,[{key:"connect",value:function(e,t,n){this.subscribes=n,this.sock=new $.a(e),this.stompClient=ee.a.over(this.sock),this.stompClient.connect({user:t},this.onConnect)}},{key:"onConnect",value:function(e){var t=this;this.isConnected=!0;var n,a=Object(z.a)(this.subscribes);try{var r=function(){var e=n.value,a=e.link,r=e.handler;t.stompClient.subscribe(a,(function(e){return r(JSON.parse(e.body))}))};for(a.s();!(n=a.n()).done;)r()}catch(c){a.e(c)}finally{a.f()}}},{key:"disconnect",value:function(){null!==this.stompClient&&this.stompClient.disconnect(),this.isConnected=!1}},{key:"send",value:function(e,t){t=JSON.stringify(t),this.stompClient.send(e,{},t)}}]),e}(),ne=new(function(){function e(){Object(T.a)(this,e),this.sockJSClient=new te,this.dispatch=null,this.bindedActions={},this.player={},this.connect=this.connect.bind(this),this.bindAction=this.bindAction.bind(this),this.invitePlayer=this.invitePlayer.bind(this)}return Object(q.a)(e,[{key:"connect",value:function(e,t){var n=this;this.dispatch=t,this.player=e;var a=Object.entries(K.socketListen).map((function(e){var t=Object(Q.a)(e,2);t[0];return t[1]})).map((function(e){return{link:e,handler:n.handleLink(e)}}));this.sockJSClient.connect(K.socketServer,this.player.username,a)}},{key:"disconnect",value:function(){this.sockJSClient.disconnect()}},{key:"handleLink",value:function(e){return e in this.bindedActions?this.bindedActions[e]:function(){return console.log("Recived message from ".concat(e))}}},{key:"bindAction",value:function(e,t){this.bindedActions[e]=t}},{key:"invitePlayer",value:function(e){if(e.username!==this.player.username){var t={toUser:e.username};this.sockJSClient.send(K.paths.invitePlayer,t)}}},{key:"move",value:function(e){this.sockJSClient.send(K.paths.move,e)}},{key:"surrend",value:function(){this.sockJSClient.send(K.paths.surrender)}},{key:"acceptPlayer",value:function(e){var t={toUser:e};this.sockJSClient.send(K.paths.acceptPlayer,t)}}]),e}()),ae=function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:v,payload:e}),ne.connect(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},re=function(){return function(){var e=Object(J.a)(W.a.mark((function e(t){var n,a,r,c;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V.isCredentialsSaved()){e.next=2;break}return e.abrupt("return");case 2:return n=V.getCredentials(),a=n.username,r=n.password,e.next=5,V.login({username:a,password:r});case 5:c=e.sent,ae(c)(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ce=n(50),oe=n(415),ie=n(143),se=n(416),le=n(433),ue=n(432),me=n(430),pe=function(e){var t=e.label,n=e.input,a=e.meta,c=a.touched,o=a.invalid,i=a.error,s=Object(G.a)(e,["label","input","meta"]);return r.a.createElement(me.a,Object.assign({label:t,autoComplete:"off",placeholder:t,error:c&&o,helperText:c&&i},n,s))},de=function(e){Object(P.a)(n,e);var t=Object(I.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.pristine,a=e.submitting,c=e.error,o=e.classes;return r.a.createElement("form",{onSubmit:t},r.a.createElement(oe.a,{container:!0,spacing:1},r.a.createElement(oe.a,{item:!0,xs:12},r.a.createElement("h1",null,"\u05d4\u05ea\u05d7\u05d1\u05e8")),r.a.createElement(oe.a,{item:!0,xs:12},c&&r.a.createElement("span",{className:o.errorMessage},c)),r.a.createElement(oe.a,{item:!0,xs:12},r.a.createElement(le.a,{component:pe,label:"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9",name:"username",type:"text"})),r.a.createElement(oe.a,{item:!0,xs:12},r.a.createElement(le.a,{component:pe,label:"\u05e1\u05d9\u05e1\u05de\u05d0",name:"password",type:"password"})),r.a.createElement(oe.a,{item:!0,xs:1}),r.a.createElement(oe.a,{item:!0,xs:10},r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,xs:12,lg:6},r.a.createElement(se.a,{disabled:n||a,type:"submit",variant:"contained",fullWidth:!0,color:"primary"},"\u05d4\u05ea\u05d7\u05d1\u05e8")),r.a.createElement(oe.a,{item:!0,xs:12,lg:6},r.a.createElement(se.a,{variant:"outlined",color:"primary",fullWidth:!0,component:R.b,to:"/auth/register"},"\u05d4\u05d9\u05e8\u05e9\u05dd"))))))}}]),n}(r.a.Component),fe={form:"login",validate:function(e){var t={};return e.username||(t.username="\u05d7\u05d9\u05d9\u05d1 \u05dc\u05e6\u05d9\u05d9\u05df \u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9"),e.password||(t.password="\u05d7\u05d9\u05d9\u05d1 \u05dc\u05e6\u05d9\u05d9\u05df \u05e1\u05d9\u05e1\u05de\u05d0"),t}},be=Object(U.a)((function(e){return{errorMessage:{color:"red"}}}))(Object(ue.a)(fe)(de)),he=function(e){Object(P.a)(n,e);var t=Object(I.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.pristine,a=e.submitting;return r.a.createElement("form",{onSubmit:t},r.a.createElement(oe.a,{container:!0,spacing:1},r.a.createElement(oe.a,{item:!0,xs:12},r.a.createElement("h1",null,"\u05d4\u05d9\u05e8\u05e9\u05dd")),r.a.createElement(oe.a,{item:!0,xs:12},r.a.createElement(le.a,{component:pe,label:"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9",name:"username",type:"text"})),r.a.createElement(oe.a,{item:!0,xs:12},r.a.createElement(le.a,{component:pe,label:"\u05e1\u05d9\u05e1\u05de\u05d0",name:"password",type:"password"})),r.a.createElement(oe.a,{item:!0,xs:12},r.a.createElement(le.a,{component:pe,label:"\u05d0\u05d9\u05de\u05d5\u05ea \u05e1\u05d9\u05e1\u05de\u05d4",name:"password_repeat",type:"password"})),r.a.createElement(oe.a,{item:!0,xs:12},r.a.createElement(le.a,{component:pe,name:"name",type:"text",label:"\u05e9\u05dd \u05de\u05dc\u05d0"})),r.a.createElement(oe.a,{item:!0,xs:1}),r.a.createElement(oe.a,{item:!0,xs:10},r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(oe.a,{item:!0,xs:12,lg:6},r.a.createElement(se.a,{disabled:n||a,type:"submit",variant:"contained",fullWidth:!0,color:"primary"},"\u05d4\u05d9\u05e8\u05e9\u05dd")),r.a.createElement(oe.a,{item:!0,xs:12,lg:6},r.a.createElement(se.a,{variant:"outlined",color:"primary",fullWidth:!0,component:R.b,to:"/auth/login"},"\u05d4\u05ea\u05d7\u05d1\u05e8"))))))}}]),n}(r.a.Component),ve={form:"register",validate:function(e){var t={};return e.username||(t.username="\u05d7\u05d9\u05d9\u05d1 \u05dc\u05e6\u05d9\u05d9\u05df \u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9"),e.password||(t.password="\u05d7\u05d9\u05d9\u05d1 \u05dc\u05e6\u05d9\u05d9\u05df \u05e1\u05d9\u05e1\u05de\u05d0"),e.password_repeat?e.password_repeat!==e.password&&(t.password_repeat="\u05d0\u05d9\u05de\u05d5\u05ea \u05e1\u05d9\u05e1\u05de\u05d4 \u05d0\u05d9\u05e0\u05d5 \u05ea\u05e7\u05d9\u05df"):t.password_repeat="\u05d7\u05d9\u05d9\u05d1 \u05dc\u05d0\u05de\u05ea \u05e1\u05d9\u05e1\u05de\u05d4",e.name||(t.name="\u05d9\u05e9 \u05dc\u05e6\u05d9\u05d9\u05df \u05e9\u05dd \u05de\u05dc\u05d0"),t}},ge=Object(U.a)((function(e){return{}}))(Object(ue.a)(ve)(he)),Ee=function(e){Object(P.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(T.a)(this,n),(a=t.call(this,e)).submitRegister=a.submitRegister.bind(Object(ce.a)(a)),a.submitLogin=a.submitLogin.bind(Object(ce.a)(a)),a}return Object(q.a)(n,[{key:"submitRegister",value:function(){var e=Object(J.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.register(t);case 3:n=e.sent,this.props.setUser(n),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new ie.a({username:"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9 \u05db\u05d1\u05e8 \u05e7\u05d9\u05d9\u05dd"});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"submitLogin",value:function(){var e=Object(J.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.login(t);case 3:n=e.sent,this.props.setUser(n),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new ie.a({_error:"\u05e4\u05e8\u05d8\u05d9\u05dd \u05d0\u05d9\u05e0\u05dd \u05ea\u05e7\u05d9\u05e0\u05d9\u05dd"});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.match;return r.a.createElement(oe.a,{container:!0,spacing:0,direction:"column",alignContent:"center",justify:"center"},r.a.createElement(oe.a,{item:!0,xs:10,lg:6,className:n.authBox},r.a.createElement(N.b,{exact:!0,path:"".concat(a.path,"/register"),component:function(){return r.a.createElement(ge,{onSubmit:e.submitRegister})}}),r.a.createElement(N.b,{exact:!0,path:"".concat(a.path,"/login"),component:function(){return r.a.createElement(be,{onSubmit:e.submitLogin})}})))}}]),n}(r.a.Component),ye=Object(i.b)((function(e){return{}}),(function(e,t){return Object(f.bindActionCreators)({setUser:ae},e)}))(Object(U.a)((function(e){return{authBox:{width:"100%",border:"1px solid #000",marginTop:"3%",textAlign:"center",paddingBottom:"1%",borderRadius:"20px"}}}))(Ee)),Oe=n(117),Se=function(e){switch(e.toLocaleLowerCase()){case"white".toLowerCase():return"white";case"black".toLowerCase():return"black";default:return null}},ke=function(e){return{row:e.row-1,column:e.column-1}},je=function(e){return{row:e.row+1,column:e.column+1}},we=function(e,t){return Object(Oe.isEqual)(e,t)},_e=function(e){return{row:e[0],column:e[1]}},Ce=function e(){var t=this;Object(T.a)(this,e),this.load=function(e,n,a){t._isGameOver=e.gameOver,t._winnerColor=e.winnerColor,t._playerColor=Se(n),t._currentTurn=Se(e.currentPlayerColor),t._legalMoves=e.legalMovesCollection.map((function(e){return Object(k.a)(Object(k.a)({},e),{},{from:ke(e.from),to:ke(e.to)})})),t._board=function(){var e,t=[],n=Object(z.a)(Object(Oe.range)(0,8));try{var a=function(){var n=e.value;t.push([]),Object(Oe.times)(8,(function(){return t[n].push(null)}))};for(n.s();!(e=n.n()).done;)a()}catch(r){n.e(r)}finally{n.f()}return t}(),t._selectedSquare=[-1,-1],t._selectableSquares=[],t._playerMoveAction=a,t._loadPieces(e.board.pieces)},this.getBoard=function(){return t._board},this.getWinnerColor=function(){return t._winnerColor},this.isGameOver=function(){return t._isGameOver},this.getSelectableSquares=function(){return t._selectableSquares},this.getCurrentPlayerColor=function(){return t._currentTurn},this.getSelectedSquare=function(){return t._selectedSquare},this.selectSquare=function(e,n){var a=[e,n];if(t._isPlayerTurn())if(t._isSelectableSquare(a))t._moveFromTo(t._selectedSquare,a),t._cleanSelectableSquares(),t._cleanSelectedSquare();else if(t._isCancelingSelected(a))t._cleanSelectableSquares(),t._cleanSelectedSquare();else if(t._isSquareOfPlayer(a)){var r=t._allMovesFromPoint(a);t._setSelectableSquares(r),t._setSelectedSquare(a)}},this._moveFromTo=function(e,n){var a=je(_e(e)),r=je(_e(n));t._playerMoveAction(a,r)},this._isSquareOfPlayer=function(e){var n,a=Object(Q.a)(e,2),r=a[0],c=a[1];return(null===(n=t._board[r][c])||void 0===n?void 0:n.color)===t._playerColor},this._isPlayerTurn=function(){return t._playerColor===t._currentTurn},this._isCancelingSelected=function(e){return we(e,t._selectedSquare)},this._isSelectableSquare=function(e){return function(e,t){return e.some((function(e){return we(e,t)}))}(t._selectableSquares,e)},this._setSelectedSquare=function(e){return t._selectedSquare=e},this._cleanSelectedSquare=function(){return t._selectedSquare=[-1,-1]},this._setSelectableSquares=function(e){return t._selectableSquares=e},this._cleanSelectableSquares=function(){return t._selectableSquares=[]},this._allMovesFromPoint=function(e){var n=e,a=Object(Q.a)(n,2),r=a[0],c=a[1];return e={row:r,column:c},t._legalMoves.filter((function(t){return n=t.from,a=e,(null===n||void 0===n?void 0:n.row)===(null===a||void 0===a?void 0:a.row)&&(null===n||void 0===n?void 0:n.column)===(null===a||void 0===a?void 0:a.column);var n,a})).map((function(e){return function(e){return[e.row,e.column]}(e.to)}))},this._loadPieces=function(e){var n,a=Object(z.a)(e);try{for(a.s();!(n=a.n()).done;){var r=n.value,c=ke(r.position);t._board[c.row][c.column]={color:Se(r.color),king:r.king}}}catch(o){a.e(o)}finally{a.f()}}},xe=function(e){var t=e.options&&e.options.key;return{type:"App/ENQUEUE_SNACKBAR",notification:Object(k.a)(Object(k.a)({},e),{},{key:t||(new Date).getTime()+Math.random()})}},Ae=function(e){return{type:"App/CLOSE_SNACKBAR",dismissAll:!e,key:e}},Le=function(e,t){ne.move({from:e,to:t})};function Te(e,t){return e[t=t.toLowerCase()].name}function qe(e){var t=(e.winnerColor||"").toLowerCase();return""===t?"":e[t].name}var Pe=function(e,t){return function(){var n=Object(J.a)(W.a.mark((function n(a){var r,c,o,i,s;return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.error){n.next=3;break}return a(xe({message:"\u05d4\u05ea\u05e7\u05d1\u05dc\u05d4 \u05e9\u05d2\u05d9\u05d0\u05d4: ".concat(e.error),options:{key:(new Date).getTime()+Math.random(),variant:"error"}})),n.abrupt("return");case 3:r=e.black,c=r.name===t?"BLACK":"WHITE",i=Te(e,o="WHITE"===c?"BLACK":"WHITE"),s=qe(e),(F=new Ce).load(e,c,Le),a({type:"Game/SET_CURRENT_PLAYER_COLOR",payload:F.getCurrentPlayerColor()}),a({type:"Game/SET_BOARD",payload:F.getBoard()}),a({type:"Game/SET_OPPONENT_COLOR",payload:o}),a({type:"Game/SET_PLAYER_COLOR",payload:c}),a({type:"Game/SET_IS_GAME_OVER",payload:F.isGameOver()}),a({type:"Game/SET_OPPONENT_NICKNAME",payload:i}),a({type:"Game/SET_WINNER_USERNAME",payload:s});case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Ie=n(64),Re=n(111),Ne=n.n(Re),Ue=n(205),Ge=n.n(Ue),Me={width:"80%",borderRadius:"30px",marginLeft:"5px",height:"80%",textAlign:"center"},Be={color:"#b58500"};function We(e){var t=e.piece,n=e.isSelected,a=e.onSelect;if(null===t)return null;var c=t.get("color"),o=t.get("king"),i=Object(k.a)({},Me);return i.background="black"===c?"#000":"#fff",i.border=n?"3px solid red":null,r.a.createElement("div",{style:i,onClick:a},o&&r.a.createElement(Ge.a,{style:Be}))}var Je=function(e,t){return e%2===0?t%2===0?"white":"black":t%2===0?"black":"white"},De=function(e,t,n){return n.filter((function(n){var a=Object(Q.a)(n,2),r=a[0],c=a[1];return r===e&&c===t})).size>0},He=Object(U.a)((function(e){return{board:{direction:"ltr",border:"1px solid #000",borderCollapse:"collapse",borderSpacing:0},square:{width:"60px",height:"60px",cursor:"pointer"},black:{background:"green",color:"white"},white:{background:"white"},optionSquare:{background:"#03ff03",opacity:.8}}}))((function(e){var t=e.classes,n=e.board,a=e.selectableSquares,c=e.selected,o=e.onSelectSquare;return r.a.createElement("table",{className:t.board},n.map((function(e,n){return r.a.createElement("tr",{key:n},e.map((function(e,i){return r.a.createElement("td",{key:i,className:Ne()(t.square,t[Je(n,i)],Object(Ie.a)({},t.optionSquare,De(n,i,a))),onClick:function(){return o({row:n,column:i})}},r.a.createElement(We,{piece:e,isSelected:c.get(0)===n&&c.get(1)===i}))})))})))})),Ke=n(417),Ye=n(418),Fe=n(419),Ve=n(420),Qe=n(421),ze=function(e){var t=e.color,n={background:t||"#cccccc",font:"16px bold",color:"red",textAlign:"center",width:"20px",height:"20px",border:"1px solid #000"};return r.a.createElement("div",{style:n},null===t&&r.a.createElement(r.a.Fragment,null,"X"))},Xe=function(e){var t=e.opponent,n=e.player,c=e.currentPlayerColor,o=e.surrend;return r.a.createElement(a.Fragment,null,r.a.createElement(Ke.a,null,r.a.createElement(Ye.a,null,r.a.createElement(Fe.a,null,r.a.createElement(Ve.a,null,"\u05e6\u05d1\u05e2 \u05e9\u05d7\u05e7\u05df"),r.a.createElement(Ve.a,null,r.a.createElement(ze,{color:n.get("color")}))),r.a.createElement(Fe.a,null,r.a.createElement(Ve.a,null,"\u05ea\u05d5\u05e8 \u05d4\u05e9\u05d7\u05e7\u05df"),r.a.createElement(Ve.a,null,r.a.createElement(ze,{color:c}))))),r.a.createElement(Qe.a,null),r.a.createElement(Ke.a,null,r.a.createElement(Ye.a,null,r.a.createElement(Fe.a,null,r.a.createElement(Ve.a,null,"\u05d9\u05e8\u05d9\u05d1"),r.a.createElement(Ve.a,null,t.get("username"))),r.a.createElement(Fe.a,null,r.a.createElement(Ve.a,null,"\u05e6\u05d1\u05e2 \u05d9\u05e8\u05d9\u05d1"),r.a.createElement(Ve.a,null,r.a.createElement(ze,{color:t.get("color")}))))),r.a.createElement(Qe.a,null),r.a.createElement(Ke.a,null,r.a.createElement(Ye.a,null,r.a.createElement(Fe.a,null,r.a.createElement(Ve.a,null,r.a.createElement(se.a,{variant:"contained",onClick:function(){window.confirm("\u05d1\u05d8\u05d5\u05d7 \u05d0\u05ea\u05d4 \u05e8\u05d5\u05e6\u05d4 \u05dc\u05d4\u05d9\u05db\u05e0\u05e2?")&&o()},color:"primary"},"\u05d4\u05d9\u05db\u05e0\u05e2"))))))},$e=n(434),Ze=Object(U.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))((function(e){var t=e.classes,n=e.open,a=e.winnerUsername,c=e.onClose,o=""!==a?"The winner is ".concat(a):"Draw!";return r.a.createElement($e.a,{open:n,className:t.modal,onClose:c},r.a.createElement("div",{className:t.paper},r.a.createElement("h2",{id:"transition-modal-title"},"Game over"),r.a.createElement("p",{id:"transition-modal-description"},o),r.a.createElement("p",null,r.a.createElement("button",{onClick:c},"Exit"))))})),et=Object(N.g)(Object(U.a)((function(e){return{game_sidebar:{textAlign:"center"},gameContainer:{marginTop:"20px"}}}))((function(e){var t=e.classes,n=e.history,a=Object(i.c)(),c=Object(i.d)((function(e){return e.game.get("board")})),o=Object(i.d)((function(e){return e.game.get("selectableSquares")})),s=Object(i.d)((function(e){return e.game.get("selected")})),l=Object(i.d)((function(e){return e.game.get("opponent")})),u=Object(i.d)((function(e){return e.game.get("isGameOver")})),m=Object(i.d)((function(e){return e.game.get("currentPlayer")})),p=Object(i.d)((function(e){return e.game.get("player")})),d=Object(i.d)((function(e){return e.game.get("winnerUsername")}));return r.a.createElement(oe.a,{container:!0,spacing:0},r.a.createElement(Ze,{open:u,winnerUsername:d,onClose:function(){return n.push("/")}}),r.a.createElement(oe.a,{item:!0,xs:3,className:t.game_sidebar},r.a.createElement("h1",null,"Game"),r.a.createElement(Xe,{opponent:l,player:p,surrend:function(){return ne.surrend()},currentPlayerColor:m.get("color")})),r.a.createElement(oe.a,{item:!0,xs:1}),r.a.createElement(oe.a,{item:!0,xs:6},r.a.createElement("div",{className:t.gameContainer},r.a.createElement(He,{board:c,selectableSquares:o,selected:s,onSelectSquare:function(e){var t=e.row,n=e.column;return a(function(e,t){return function(){var n=Object(J.a)(W.a.mark((function n(a){return W.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:F.selectSquare(e,t),a({type:"Game/SET_SELECT_PIECE",payload:F.getSelectedSquare()}),a({type:"Game/SET_SELECTABLE_SQUARES",payload:F.getSelectableSquares()});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}))))}))),tt=[],nt=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e.app.notifications||[]})),n=Object(u.b)(),a=n.enqueueSnackbar,c=n.closeSnackbar;return r.a.useEffect((function(){t.forEach((function(t){var n,r=t.key,o=t.message,i=t.options,s=void 0===i?{}:i,l=t.dismissed;void 0!==l&&l?c(r):tt.includes(r)||(a(o,Object(k.a)(Object(k.a)({key:r},s),{},{onClose:function(e,t,n){s.onClose&&s.onClose(e,t,n)},onExited:function(t,n){var a;e(function(e){return{type:"App/REMOVE_SNACKBAR",key:e}}(n)),a=n,tt=Object(S.a)(tt.filter((function(e){return a!==e})))}})),n=r,tt=[].concat(Object(S.a)(tt),[n]))}))}),[t,c,a,e]),null},at=n(414),rt=n(422),ct=n(423),ot=n(424),it=n(436),st=function(e){return"".concat(e.get("username")," (").concat(e.get("score"),")")},lt=function(e,t){var n;return Ne()((n={},Object(Ie.a)(n,e.iconAvailable,t),Object(Ie.a)(n,e.iconUnavailable,!t),n))},ut=Object(U.a)((function(e){return{lobbyItem:{textAlign:"right"},iconAvailable:{color:"green"},iconUnavailable:{color:"red"}}}))((function(e){var t=e.classes,n=e.users,a=e.onSelect;return r.a.createElement(at.a,{component:"nav","aria-labelledby":"nested-list-subheader"},n.map((function(e,n){return r.a.createElement(rt.a,{disabled:!e.get("available"),button:!0,onClick:function(){return a(e.toJS())},className:t.lobbyItem,key:n},r.a.createElement(ct.a,null,r.a.createElement(it.a,{className:lt(t,e.get("available"))})),r.a.createElement(ot.a,{primary:st(e)}))})))})),mt=new(function(){function e(){Object(T.a)(this,e)}return Object(q.a)(e,[{key:"fetch_all_users",value:function(){var e=Object(J.a)(W.a.mark((function e(){var t;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.get(K.paths.allPlayers);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"get_current_game",value:function(){var e=Object(J.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.get(K.paths.currentGame+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"get_history",value:function(){var e=Object(J.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.get(K.paths.getHistory+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),pt=function(){return function(){var e=Object(J.a)(W.a.mark((function e(t){var n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mt.fetch_all_users();case 2:n=e.sent,t({type:"Lobby/SET_ALL_USERS",payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},dt=function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ne.invitePlayer(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ft=function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ne.acceptPlayer(e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},bt=function(e){Object(P.a)(n,e);var t=Object(I.a)(n);function n(e){var a;return Object(T.a)(this,n),(a=t.call(this,e)).onSelectUser=a.onSelectUser.bind(Object(ce.a)(a)),a.recivedInvitation=a.recivedInvitation.bind(Object(ce.a)(a)),a.gameStart=a.gameStart.bind(Object(ce.a)(a)),a.checkIfAlreadyInGame=a.checkIfAlreadyInGame.bind(Object(ce.a)(a)),a}return Object(q.a)(n,[{key:"componentWillMount",value:function(){this.props.fetchAllPlayers()}},{key:"componentDidMount",value:function(){ne.bindAction(K.socketListen.gameInvitation,this.recivedInvitation),ne.bindAction(K.socketListen.gameStart,this.gameStart),this.checkIfAlreadyInGame()}},{key:"checkIfAlreadyInGame",value:function(){var e=Object(J.a)(W.a.mark((function e(){var t,n=this;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.loggedUser.get("username"),mt.get_current_game(t).then((function(e){n.gameStart(e)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gameStart",value:function(e){var t=this.props,n=t.loadGame,a=t.history;n(e,t.loggedUser.get("username")),a.push("/game")}},{key:"recivedInvitation",value:function(e){var t=e.fromUser,n=this.props,c=n.classes,o=n.closeSnackbar,i=n.acceptPlayer;this.props.enqueueSnackbar({message:"\u05d4\u05d6\u05de\u05e0\u05d4 \u05dc\u05de\u05e9\u05d7\u05e7 \u05de\u05d0\u05ea ".concat(t),options:{key:(new Date).getTime()+Math.random(),variant:"success",action:function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(se.a,{className:c.acceptInvitationButton,onClick:function(){i(t),o(e)}},"\u05e7\u05d1\u05dc"),r.a.createElement(se.a,{onClick:function(){return o(e)}},"\u05d1\u05d8\u05dc"))}}})}},{key:"onSelectUser",value:function(e){var t=this;e.username===this.props.loggedUser.get("username")&&this.props.enqueueSnackbar({message:"\u05dc\u05d0 \u05e0\u05d9\u05ea\u05df \u05dc\u05d4\u05d6\u05de\u05d9\u05df \u05d0\u05ea \u05e2\u05e6\u05de\u05da \u05dc\u05de\u05e9\u05d7\u05e7",options:{key:(new Date).getTime()+Math.random(),variant:"outlined",action:function(e){return r.a.createElement(se.a,{style:{color:"white"},onClick:function(){return t.props.closeSnackbar(e)}},"\u05d0\u05d9\u05e9\u05d5\u05e8")}}}),this.props.invitePlayer(e)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.allUsers;return r.a.createElement(oe.a,{container:!0,spacing:0,direction:"column",alignContent:"center",justify:"center"},r.a.createElement(oe.a,{item:!0,xs:10,lg:6,className:t.lobbyBox},r.a.createElement(ut,{users:n,onSelect:this.onSelectUser})))}}]),n}(r.a.Component),ht=Object(i.b)((function(e){return{allUsers:e.lobby.get("allUsers"),loggedUser:e.auth.get("user")}}),(function(e,t){return Object(f.bindActionCreators)({fetchAllPlayers:pt,invitePlayer:dt,acceptPlayer:ft,enqueueSnackbar:xe,closeSnackbar:Ae,loadGame:Pe},e)}))(Object(N.g)(Object(U.a)((function(e){return{lobbyBox:{width:"100%",border:"1px solid #000",marginTop:"3%",textAlign:"center",paddingBottom:"1%",borderRadius:"20px"},acceptInvitationButton:{fontWeight:"bold"}}}))(bt))),vt=n(425),gt=n(426),Et=n(118),yt=Object(U.a)((function(e){return{title:{flexGrow:1}}}))((function(e){var t=e.classes,n=Object(i.c)(),a=Object(i.d)((function(e){return e.auth.get("isLogin")})),c=Object(i.d)((function(e){return e.auth.get("user")}));return r.a.createElement(vt.a,{position:"static"},r.a.createElement(gt.a,null,r.a.createElement(Et.a,{variant:"h6",className:t.title},"Checkers"),a&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{variant:"inherit"},c.get("username")),r.a.createElement(se.a,{color:"inherit",component:R.b,to:"/history"},"History"),r.a.createElement(se.a,{color:"inherit",component:R.b,to:"/"},"Lobby"),r.a.createElement(se.a,{color:"inherit",onClick:function(){return n((e=c.get("id"),function(){var t=Object(J.a)(W.a.mark((function t(n){return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne.disconnect(),t.next=3,V.logout(e);case 3:n({type:g});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));var e}},"Logout"))))})),Ot=n(206),St=n.n(Ot),kt=n(427),jt=function(e,t){return"".concat(e.getIn([t,"username"]))};var wt=function(e){var t=e.games;return r.a.createElement(oe.a,{container:!0,justify:"center",alignContent:"center"},r.a.createElement(oe.a,{item:!0},r.a.createElement(Ke.a,null,r.a.createElement(kt.a,null,r.a.createElement(Fe.a,null,r.a.createElement(Ve.a,null,"Score in game"),r.a.createElement(Ve.a,null,"White"),r.a.createElement(Ve.a,null,"Black"),r.a.createElement(Ve.a,null,"Winner"),r.a.createElement(Ve.a,null,"Date"))),r.a.createElement(Ye.a,null,t.map((function(e){return r.a.createElement(Fe.a,{key:e.get("gameId")},r.a.createElement(Ve.a,null,e.get("score")),r.a.createElement(Ve.a,null,jt(e,"white")),r.a.createElement(Ve.a,null,jt(e,"black")),r.a.createElement(Ve.a,null,r.a.createElement(ze,{color:e.get("winner")})),r.a.createElement(Ve.a,null,function(e){return St()(e.get("timestamp")).format("DD/MM/YYYY HH:mm:ss")}(e)))}))))))};var _t=Object(U.a)((function(e){return{}}))((function(e){e.classes;var t=Object(i.c)(),n=Object(i.d)((function(e){return e.history.get("games")})),c=Object(i.d)((function(e){return e.auth.getIn(["user","id"])}));return Object(a.useEffect)((function(){t(function(e){return function(){var t=Object(J.a)(W.a.mark((function t(n){var a;return W.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt.get_history(e);case 2:a=t.sent,n({type:"History/SET_HISTORY_GAMES",payload:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(c))}),[t,c]),r.a.createElement(oe.a,{container:!0,alignContent:"center",justify:"center"},r.a.createElement(oe.a,{item:!0,lg:10},r.a.createElement(oe.a,{container:!0,spacing:2},r.a.createElement(wt,{games:n}))))})),Ct=function(e){Object(P.a)(n,e);var t=Object(I.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(q.a)(n,[{key:"componentWillMount",value:function(){this.props.initLogin()}},{key:"render",value:function(){var e=this.props,t=e.isLogin,n=e.classes,a={redirectUrl:"/auth/login",redirected:!t};return r.a.createElement("div",{className:n.root},r.a.createElement(nt,null),r.a.createElement(R.a,null,r.a.createElement(yt,null),r.a.createElement(N.d,null,r.a.createElement(M,{path:"/auth",component:ye,config:{redirectUrl:"/",redirected:t}}),r.a.createElement(M,{path:"/game",component:et,config:a}),r.a.createElement(M,{path:"/history",component:_t,config:a}),r.a.createElement(M,{path:"/",component:ht,config:a}))))}}]),n}(r.a.Component),xt=Object(i.b)((function(e){return{isLogin:e.auth.get("isLogin")}}),(function(e,t){return Object(f.bindActionCreators)({initLogin:re},e)}))(Object(U.a)((function(e){return{root:{flexGrow:1}}}))(Ct));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:L},r.a.createElement(l.a,{theme:d},r.a.createElement(s.a,null),r.a.createElement(u.a,{maxSnack:3,hideIconVariant:!0,preventDuplicate:!0,anchorOrigin:{horizontal:"right",vertical:"bottom"}},r.a.createElement(xt,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[216,1,2]]]);
//# sourceMappingURL=main.456b7532.chunk.js.map